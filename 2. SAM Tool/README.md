# üöÅ SAM Tool

**–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π SAM (Segment Anything Model)**

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–ê–≤—Ç–æ—Ä**: –ö–æ–º–∞–Ω–¥–∞ —Ö–∞–∫–∞—Ç–æ–Ω–∞ A.I.C.O  
**–î–∞—Ç–∞**: 28.05.2025

[![Python](https://img.shields.io/badge/Python-3.7+-blue.svg)](https://python.org)
[![OpenCV](https://img.shields.io/badge/OpenCV-4.5+-green.svg)](https://opencv.org)
[![SAM](https://img.shields.io/badge/SAM-Meta-red.svg)](https://github.com/facebookresearch/segment-anything)

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–†—É—á–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞** - —Å–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π –∫–ª–∏–∫–∞–º–∏ –º—ã—à–∏
- **SAM –∞–≤—Ç–æ—Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è** - –æ–¥–∏–Ω –∫–ª–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–∞
- **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞–º–∏ –æ–±—ä–µ–∫—Ç–æ–≤
- **–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö** - XML (Pascal VOC), CSV –¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º** - —É–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–∞–ø–∫–∞–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
pip install -r requirements.txt

# SAM –º–æ–¥–µ–ª—å
pip install git+https://github.com/facebookresearch/segment-anything.git

# PyTorch (–≤—ã–±–µ—Ä–∏—Ç–µ –≤–µ—Ä—Å–∏—é –¥–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã)
pip install torch torchvision torchaudio
```

### 2. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ SAM

–°–∫–∞—á–∞–π—Ç–µ –æ–¥–Ω—É –∏–∑ –º–æ–¥–µ–ª–µ–π SAM –∏ –ø–æ–º–µ—Å—Ç–∏—Ç–µ –≤ –ø–∞–ø–∫—É `models/`:

```bash
# –õ—É—á—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å (2.6 GB)
wget https://dl.fbaipublicfiles.com/segment_anything/sam_vit_h_4b8939.pth

# –°—Ä–µ–¥–Ω—è—è –º–æ–¥–µ–ª—å (1.3 GB)
wget https://dl.fbaipublicfiles.com/segment_anything/sam_vit_l_0b3195.pth

# –ë—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å (0.4 GB)
wget https://dl.fbaipublicfiles.com/segment_anything/sam_vit_b_01ec64.pth
```

### 3. –ó–∞–ø—É—Å–∫

```bash
python main.py
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞

```bash
python build_exe.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
sam_segmentation_tool/
‚îú‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ build_exe.py              # –°–æ–∑–¥–∞–Ω–∏–µ exe
‚îú‚îÄ‚îÄ core/                     # –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ app.py                # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ sam_integration.py    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è SAM
‚îÇ   ‚îú‚îÄ‚îÄ file_manager.py       # –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ export_manager.py     # –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ ui/                       # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îú‚îÄ‚îÄ main_window.py        # –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
‚îÇ   ‚îú‚îÄ‚îÄ panels.py             # –ü–∞–Ω–µ–ª–∏ UI
‚îÇ   ‚îî‚îÄ‚îÄ canvas_handler.py     # Canvas –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ‚îÄ utils/                    # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ image_utils.py        # –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ annotation_utils.py   # –ê–Ω–Ω–æ—Ç–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ xml_utils.py          # XML –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ models/                   # SAM –º–æ–¥–µ–ª–∏
```

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã:

1. **–†—É—á–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞**
   - –ö–ª–∏–∫–∞–π—Ç–µ –ª–µ–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–µ–∫
   - –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏

2. **SAM –∞–≤—Ç–æ—Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è** 
   - –û–¥–∏–Ω –∫–ª–∏–∫ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞

### –ì–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏:

- `‚Üê/‚Üí` - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º
- `Ctrl+S` - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å XML
- `Ctrl+E` - –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV
- `Del` - –£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é
- `Ctrl+Z` - –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ

## üìä –§–æ—Ä–º–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞

### XML (Pascal VOC —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π)
```xml
<annotation>
  <filename>image.jpg</filename>
  <object>
    <name>car</name>
    <bndbox>
      <xmin>100</xmin>
      <ymin>200</ymin>
      <xmax>300</xmax>
      <ymax>400</ymax>
    </bndbox>
    <segmentation>...</segmentation>
  </object>
</annotation>
```

### CSV –¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è
```csv
filename,class,bbox_x_min,bbox_y_min,bbox_x_max,bbox_y_max,yolo_center_x,yolo_center_y,yolo_width,yolo_height
image.jpg,car,100,200,300,400,0.5,0.6,0.2,0.3
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.py`:

```python
# –ö–ª–∞—Å—Å—ã –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DEFAULT_CLASSES = [
    'car', 'person', 'animal', 'fire', 'smoke', 
    'forest_cut', 'building', 'road', 'water', 'vegetation'
]

# –¶–≤–µ—Ç–∞ –¥–ª—è –∫–ª–∞—Å—Å–æ–≤
CLASS_COLORS = {
    'car': (255, 0, 0),
    'person': (0, 255, 0),
    # ...
}
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º–æ–≥–æ —Ñ–∞–π–ª–∞:

```bash
# PyInstaller (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
python build_exe.py

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
pyinstaller --onedir --windowed main.py
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

```bash
pip install pytest
pytest tests/
```

## üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: 3.7+
- **–û–°**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **RAM**: 8GB+ (16GB+ –¥–ª—è –±–æ–ª—å—à–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- **GPU**: CUDA —Å–æ–≤–º–µ—Å—Ç–∏–º–∞—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è SAM)